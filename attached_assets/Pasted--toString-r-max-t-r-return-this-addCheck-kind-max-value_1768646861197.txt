.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:lt.toString(r)})}get minDate(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}};Io.create=n=>new Io({checks:[],coerce:n?.coerce||!1,typeName:vt.ZodDate,...Tt(n)});var dl=class extends Ct{_parse(t){if(this._getType(t)!==rt.symbol){let e=this._getOrReturnCtx(t);return Xe(e,{code:Pe.invalid_type,expected:rt.symbol,received:e.parsedType}),bt}return Gn(t.data)}};dl.create=n=>new dl({typeName:vt.ZodSymbol,...Tt(n)});var Ro=class extends Ct{_parse(t){if(this._getType(t)!==rt.undefined){let e=this._getOrReturnCtx(t);return Xe(e,{code:Pe.invalid_type,expected:rt.undefined,received:npm warn config production Use `--omit=dev` instead.
> rest-express@1.0.0 start
> NODE_ENV=production node dist/index.cjs
/app/dist/index.cjs:214
		`;await r.execute(X`CREATE SCHEMA IF NOT EXISTS ${X.identifier(u)}`),await r.execute(p);let g=(await r.all(X`select id, hash, created_at from ${X.identifier(u)}.${X.identifier(o)} order by created_at desc limit 1`))[0];await r.transaction(async v=>{for await(let w of t)if(!g||Number(g.created_at)<w.folderMillis){for(let S of w.sql)await v.execute(X.raw(S));await v.execute(X`insert into ${X.identifier(u)}.${X.identifier(o)} ("hash", "created_at") values(${w.hash}, ${w.folderMillis})`)}})}escapeName(t){return`"${t}"`}escapeParam(t){return`$${t+1}`}escapeString(t){return`'${t.replace(/'/g,"''")}'`}buildWithCTE(t){if(!t?.length)return;let r=[X`with `];for(let[e,o]of t.entries())r.push(X`${X.identifier(o._.alias)} as (${o._.sql})`),e<t.length-1&&r.push(X`, `);return r.push(X` `),X.join(r)}buildDeleteQuery({table:t,where:r,returning:e,withList:o}){let u=this.buildWithCTE(o),p=e?X` returning ${this.buildSelection(e,{isSingleTable:!0})}`:void 0,m=r?X` where ${r}`:void 0;return X`${u}delete from ${t}${m}${p}`}buildUpdateSet(t,r){let e=t[Ze.Symbol.Columns],o=Object.keys(e).filter(p=>r[p]!==void 0||e[p]?.onUpdateFn!==void 0),u=o.length;return X.join(o.flatMap((p,m)=>{let g=e[p],v=r[p]??X.param(g.onUpdateFn(),g),w=X`${X.identifier(this.casing.getColumnCasing(g))} = ${v}`;return m<u-1?[w,X.raw(", ")]:[w]}))}buildUpdateQuery({table:t,set:r,where:e,returning:o,withList:u,from:p,joins:m}){let g=this.buildWithCTE(u),v=t[gn.Symbol.Name],w=t[gn.Symbol.Schema],S=t[gn.Symbol.OriginalName],F=v===S?void 0:v,P=X`${w?X`${X.identifier(w)}.`:void 0}${X.identifier(S)}${F&&X` ${X.identifier(F)}`}`,U=this.buildUpdateSet(t,r),O=p&&X.join([X.raw(" from "),this.buildFromTable(p)]),G=this.buildJoins(m),se=o?X` returning ${this.buildSelection(o,{isSingleTable:!p})}`:void 0,be=e?X` where ${e}`:void 0;return X`${g}update ${P} set ${U}${O}${G}${be}${se}`}buildSelection(t,{isSingleTable:r=!1}={}){let e=t.length,o=t.flatMap(({field:u},p)=>{let m=[];if(ye(u,tt.Aliased)&&u.isSelectionField)m.push(X.identifier(u.fieldAlias));else if(ye(u,tt.Aliased)||ye(u,tt)){let g=ye(u,tt.Aliased)?u.sql:u;r?m.push(new tt(g.queryChunks.map(v=>ye(v,Ve)?X.identifier(this.casing.getColumnCasing(v)):v))):m.push(g),ye(u,tt.Aliased)&&m.push(X` as ${X.identifier(u.fieldAlias)}`)}else ye(u,Jt)&&(r?m.push(X.identifier(this.casing.getColumnCasing(u))):m.push(u));return p<e-1&&m.push(X`, `),m});return X.join(o)}buildJoins(t){if(!t||t.length===0)return;let r=[];for(let[e,o]of t.entries()){e===0&&r.push(X` `);let u=o.table,p=o.lateral?X` lateral`:void 0;if(ye(u,gn)){let m=u[gn.Symbol.Name],g=u[gn.Symbol.Schema],v=u[gn.Symbol.OriginalName],w=m===v?void 0:o.alias;r.push(X`${X.raw(o.joinType)} join${p} ${g?X`${X.identifier(g)}.`:void 0}${X.identifier(v)}${w&&X` ${X.identifier(w)}`} on ${o.on}`)}else if(ye(u,Vn)){let m=u[vr].name,g=u[vr].schema,v=u[vr].originalName,w=m===v?void 0:o.alias;r.push(X`${X.raw(o.joinType)} join${p} ${g?X`${X.identifier(g)}.`:void 0}${X.identifier(v)}${w&&X` ${X.identifier(w)}`} on ${o.on}`)}else r.push(X`${X.raw(o.joinType)} join${p} ${u} on ${o.on}`);e<t.length-1&&r.push(X` `)}return X.join(r)}buildFromTable(t){if(ye(t,Ze)&&t[Ze.Symbol.OriginalName]!==t[Ze.Symbol.Name]){let r=X`${X.identifier(t[Ze.Symbol.OriginalName])}`;return t[Ze.Symbol.Schema]&&(r=X`${X.identifier(t[Ze.Symbol.Schema])}.${r}`),X`${r} ${X.identifier(t[Ze.Symbol.Name])}`}return t}buildSelectQuery({withList:t,fields:r,fieldsFlat:e,where:o,having:u,table:p,joins:m,orderBy:g,groupBy:v,limit:w,offset:S,lockingClause:F,distinct:P,setOperators:U}){let O=e??qi(r);for(let pt of O)if(ye(pt.field,Jt)&&ni(pt.field.table)!==(ye(p,Zr)?p._.alias:ye(p,sl)?p[vr].name:ye(p,tt)?void 0:ni(p))&&!(Lt=>m?.some(({alias:dt})=>dt===(Lt[Ze.Symbol.IsAlias]?ni(Lt):Lt[Ze.Symbol.BaseName])))(pt.field.table)){let Lt=ni(pt.field.table);throw new Error(`Your "${pt.path.join("->")}" field references a column "${Lt}"."${pt.field.name}", but the table "${Lt}" is not part of the query! Did you forget to join it?`)}let G=!m||m.length===0,se=this.buildWithCTE(t),be;P&&(be=P===!0?X` distinct`:X` distinct on (${X.join(P.on,X`, `)})`);let he=this.buildSelection(O,{isSingleTable:G}),ke=this.buildFromTable(p),_e=this.buildJoins(m),Ee=o?X` where ${o}`:void 0,De=u?X` having ${u}`:void 0,Be;g&&g.length>0&&(Be=X` order by ${X.join(g,X`, `)}`);let nt;v&&v.length>0&&(nt=X` group by ${X.join(v,X`, `)}`);let Et=typeof w=="object"||typeof w=="number"&&w>=0?X` limit ${w}`:void 0,$t=S?X` offset ${S}`:void 0,Ht=X.empty();if(F){let pt=X` for ${X.raw(F.strength)}`;F.config.of&&pt.append(X` of ${X.join(Array.isArray(F.config.of)?F.config.of:[F.config.of],X`, `)}`),F.config.noWait?pt.append(X` no wait`):F.config.skipLocked&&pt.append(X` skip locked`),Ht.append(pt)}let wt=X`${se}select${be} ${he} from ${ke}${_e}${Ee}${nt}${De}${Be}${Et}${$t}${Ht}`;return U.length>0?this.buildSetOperations(wt,U):wt}buildSetOperations(t,r){let[e,...o]=r;if(!e)throw new Error("Cannot pass undefined values to any set operator");return o.length===0?this.buildSetOperationQuery({leftSelect:t,setOperator:e}):this.buildSetOperations(this.buildSetOperationQuery({leftSelect:t,setOperator:e}),o)}buildSetOperationQuery({leftSelect:t,setOperator:{type:r,isAll:e,rightSelect:o,limit:u,orderBy:p,offset:m}}){let g=X`(${t.getSQL()}) `,v=X`(${o.getSQL()})`,w;if(p&&p.length>0){let U=[];for(let O of p)if(ye(O,Ve))U.push(X.identifier(O.name));else if(ye(O,tt)){for(let G=0;G<O.queryChunks.length;G++){let se=O.queryChunks[G];ye(se,Ve)&&(O.queryChunks[G]=X.identifier(se.name))}U.push(X`${O}`)}else U.push(X`${O}`);w=X` order by ${X.join(U,X`, `)} `}let S=typeof u=="object"||typeof u=="number"&&u>=0?X` limit ${u}`:void 0,F=X.raw(`${r} ${e?"all ":""}`),P=m?X` offset ${m}`:void 0;return X`${g}${F}${v}${w}${S}${P}`}buildInsertQuery({table:t,values:r,onConflict:e,returning:o,withList:u,select:p,overridingSystemValue_:m}){let g=[],v=t[Ze.Symbol.Columns],w=Object.entries(v).filter(([se,be])=>!be.shouldDisableInsert()),S=w.map(([,se])=>X.identifier(this.casing.getColumnCasing(se)));if(p){let se=r;ye(se,tt)?g.push(se):g.push(se.getSQL())}else{let se=r;g.push(X.raw("values "));for(let[be,he]of se.entries()){let ke=[];for(let[_e,Ee]of w){let De=he[_e];if(De===void 0||ye(De,ii)&&De.value===void 0)if(Ee.defaultFn!==void 0){let Be=Ee.defaultFn(),nt=ye(Be,tt)?Be:X.param(Be,Ee);ke.push(nt)}else if(!Ee.default&&Ee.onUpdateFn!==void 0){let Be=Ee.onUpdateFn(),nt=ye(Be,tt)?Be:X.param(Be,Ee);ke.push(nt)}else ke.push(X`default`);else ke.push(De)}g.push(ke),be<se.length-1&&g.push(X`, `)}}let F=this.buildWithCTE(u),P=X.join(g),U=o?X` returning ${this.buildSelection(o,{isSingleTable:!0})}`:void 0,O=e?X` on conflict ${e}`:void 0,G=m===!0?X`overriding system value `:void 0;return X`${F}insert into ${t} ${S} ${G}${P}${O}${U}`}buildRefreshMaterializedViewQuery({view:t,concurrently:r,withNoData:e}){let o=r?X` concurrently`:void 0,u=e?X` with no data`:void 0;return X`refresh materialized view${o} ${t}${u}`}prepareTyping(t){return ye(t,Of)||ye(t,Rf)?"json":ye(t,Pf)?"decimal":ye(t,Nf)?"time":ye(t,Lf)||ye(t,Mf)?"timestamp":ye(t,Df)||ye(t,If)?"date":ye(t,Bf)?"uuid":"none"}sqlToQuery(t,r){return t.toQuery({casing:this.casing,escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,prepareTyping:this.prepareTyping,invokeSource:r})}buildRelationalQueryWithoutPK({fullSchema:t,schema:r,tableNamesMap:e,table:o,tableConfig:u,queryConfig:p,tableAlias:m,nestedQueryRelation:g,joinOn:v}){let w=[],S,F,P=[],U,O=[];if(p===!0)w=Object.entries(u.columns).map(([be,he])=>({dbKey:he.name,tsKey:be,field:wa(he,m),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let se=Object.fromEntries(Object.entries(u.columns).map(([De,Be])=>[De,wa(Be,m)]));if(p.where){let De=typeof p.where=="function"?p.where(se,H5()):p.where;U=De&&kf(De,m)}let be=[],he=[];if(p.columns){let De=!1;for(let[Be,nt]of Object.entries(p.columns))nt!==void 0&&Be in u.columns&&(!De&&nt===!0&&(De=!0),he.push(Be));he.length>0&&(he=De?he.filter(Be=>p.columns?.[Be]===!0):Object.keys(u.columns).filter(Be=>!he.includes(Be)))}else he=Object.keys(u.columns);for(let De of he){let Be=u.columns[De];be.push({tsKey:De,value:Be})}let ke=[];p.with&&(ke=Object.entries(p.with).filter(De=>!!De[1]).map(([De,Be])=>({tsKey:De,queryConfig:Be,relation:u.relations[De]})));let _e;if(p.extras){_e=typeof p.extras=="function"?p.extras(se,{sql:X}):p.extras;for(let[De,Be]of Object.entries(_e))be.push({tsKey:De,value:cx(Be,m)})}for(let{tsKey:De,value:Be}of be)w.push({dbKey:ye(Be,tt.Aliased)?Be.fieldAlias:u.columns[De].name,tsKey:De,field:ye(Be,Jt)?wa(Be,m):Be,relationTableTsKey:void 0,isJson:!1,selection:[]});let Ee=typeof p.orderBy=="function"?p.orderBy(se,W5()):p.orderBy??[];Array.isArray(Ee)||(Ee=[Ee]),P=Ee.map(De=>ye(De,Jt)?wa(De,m):kf(De,m)),S=p.limit,F=p.offset;for(let{tsKey:De,queryConfig:Be,relation:nt}of ke){let Et=G5(r,e,nt),$t=Eo(nt.referencedTable),Ht=e[$t],wt=`${m}_${De}`,pt=Af(...Et.fields.map((Je,Ie)=>mn(wa(Et.references[Ie],wt),wa(Je,m)))),Lt=this.buildRelationalQueryWithoutPK({fullSchema:t,schema:r,tableNamesMap:e,table:t[Ht],tableConfig:r[Ht],queryConfig:ye(nt,ws)?Be===!0?{limit:1}:{...Be,limit:1}:Be,tableAlias:wt,joinOn:pt,nestedQueryRelation:nt}),dt=X`${X.identifier(wt)}.${X.identifier("data")}`.as(De);O.push({on:X`true`,table:new Zr(Lt.sql,{},wt),alias:wt,joinType:"left",lateral:!0}),w.push({dbKey:De,tsKey:De,field:dt,relationTableTsKey:Ht,isJson:!0,selection:Lt.selection})}}if(w.length===0)throw new Ff({message:`No fields selected for table "${u.tsName}" ("${m}")`});let G;if(U=Af(v,U),g){let se=X`json_build_array(${X.join(w.map(({field:ke,tsKey:_e,isJson:Ee})=>Ee?X`${X.identifier(`${m}_${_e}`)}.${X.identifier("data")}`:ye(ke,tt.Aliased)?ke.sql:ke),X`, `)})`;ye(g,jf)&&(se=X`coalesce(json_agg(${se}${P.length>0?X` order by ${X.join(P,X`, `)}`:void 0}), '[]'::json)`);let be=[{dbKey:"data",tsKey:"data",field:se.as("data"),isJson:!0,relationTableTsKey:u.tsName,selection:w}];S!==void 0||F!==void 0||P.length>0?(G=this.buildSelectQuery({table:Ef(o,m),fields:{},fieldsFlat:[{path:[],field:X.raw("*")}],where:U,limit:S,offset:F,orderBy:P,setOperators:[]}),U=void 0,S=void 0,F=void 0,P=[]):G=Ef(o,m),G=this.buildSelectQuery({table:ye(G,gn)?G:new Zr(G,{},m),fields:{},fieldsFlat:be.map(({field:ke})=>({path:[],field:ye(ke,Jt)?wa(ke,m):ke})),joins:O,where:U,limit:S,offset:F,orderBy:P,setOperators:[]})}else G=this.buildSelectQuery({table:Ef(o,m),fields:{},fieldsFlat:w.map(({field:se})=>({path:[],field:ye(se,Jt)?wa(se,m):se})),joins:O,where:U,limit:S,offset:F,orderBy:P,setOperators:[]});return{tableTsKey:u.tsName,sql:G,selection:w}}};var $d=class{static[K]="TypedQueryBuilder";getSelectedFields(){return this._.selectedFields}};var Pn=class{static[K]="PgSelectBuilder";fields;session;dialect;withList=[];distinct;constructor(t){this.fields=t.fields,this.session=t.session,this.dialect=t.dialect,t.withList&&(this.withList=t.withList),this.distinct=t.distinct}authToken;setToken(t){return this.authToken=t,this}from(t){let r=!!this.fields,e=t,o;return this.fields?o=this.fields:ye(e,Zr)?o=Object.fromEntries(Object.keys(e._.selectedFields).map(u=>[u,e[u]])):ye(e,sl)?o=e[vr].selectedFields:ye(e,tt)?o={}:o=Md(e),new Hd({table:e,fields:o,isPartialSelect:r,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct}).setToken(this.authToken)}},Ty=class extends $d{static[K]="PgSelectQueryBuilder";_;config;joinsNotNullableMap;tableName;isPartialSelect;session;dialect;constructor({table:t,fields:r,isPartialSelect:e,session:o,dialect:u,withList:p,distinct:m}){super(),this.config={withList:p,table:t,fields:{...r},distinct:m,setOperators:[]},this.isPartialSelect=e,this.session=o,this.dialect=u,this._={selectedFields:r},this.tableName=Ma(t),this.joinsNotNullableMap=typeof this.tableName=="string"?{[this.tableName]:!0}:{}}createJoin(t){return(r,e)=>{let o=this.tableName,u=Ma(r);if(typeof u=="string"&&this.config.joins?.some(p=>p.alias===u))throw new Error(`Alias "${u}" is already used in this query`);if(!this.isPartialSelect&&(Object.keys(this.joinsNotNullableMap).length===1&&typeof o=="string"&&(this.config.fields={[o]:this.config.fields}),typeof u=="string"&&!ye(r,tt))){let p=ye(r,Zr)?r._.selectedFields:ye(r,Vn)?r[vr].selectedFields:r[Ze.Symbol.Columns];this.config.fields[u]=p}if(typeof e=="function"&&(e=e(new Proxy(this.config.fields,new qr({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.joins||(this.config.joins=[]),this.config.joins.push({on:e,table:r,joinType:t,alias:u}),typeof u=="string")switch(t){case"left":{this.joinsNotNullableMap[u]=!1;break}case"right":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([p])=>[p,!1])),this.joinsNotNullableMap[u]=!0;break}case"inner":{this.joinsNotNullableMap[u]=!0;break}case"full":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([p])=>[p,!1])),this.joinsNotNullableMap[u]=!1;break}}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");createSetOperator(t,r){return e=>{let o=typeof e=="function"?e($ie()):e;if(!Cf(this.getSelectedFields(),o.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:t,isAll:r,rightSelect:o}),this}}union=this.createSetOperator("union",!1);unionAll=this.createSetOperator("union",!0);intersect=this.createSetOperator("intersect",!1);intersectAll=this.createSetOperator("intersect",!0);except=this.createSetOperator("except",!1);exceptAll=this.createSetOperator("except",!0);addSetOperators(t){return this.config.setOperators.push(...t),this}where(t){return typeof t=="function"&&(t=t(new Proxy(this.config.fields,new qr({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.where=t,this}having(t){return typeof t=="function"&&(t=t(new Proxy(this.config.fields,new qr({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.having=t,this}groupBy(...t){if(typeof t[0]=="function"){let r=t[0](new Proxy(this.config.fields,new qr({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(r)?r:[r]}else this.config.groupBy=t;return this}orderBy(...t){if(typeof t[0]=="function"){let r=t[0](new Proxy(this.config.fields,new qr({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),e=Array.isArray(r)?r:[r];this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=e:this.config.orderBy=e}else{let r=t;this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=r:this.config.orderBy=r}return this}limit(t){return this.config.setOperators.length>0?this.config.setOperators.at(-1).limit=t:this.config.limit=t,this}offset(t){return this.config.setOperators.length>0?this.config.setOperators.at(-1).offset=t:this.config.offset=t,this}for(t,r={}){return this.config.lockingClause={strength:t,config:r},this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){let{typings:t,...r}=this.dialect.sqlToQuery(this.getSQL());return r}as(t){return new Proxy(new Zr(this.getSQL(),this.config.fields,t),new qr({alias:t,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new qr({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}},Hd=class extends Ty{static[K]="PgSelect";_prepare(t){let{session:r,config:e,dialect:o,joinsNotNullableMap:u,authToken:p}=this;if(!r)throw new Error("Cannot execute a query on a query builder. Please use a database instance instead.");return gr.startActiveSpan("drizzle.prepareQuery",()=>{let m=qi(e.fields),g=r.prepareQuery(o.sqlToQuery(this.getSQL()),m,t,!0);return g.joinsNotNullableMap=u,g.setToken(p)})}prepare(t){return this._prepare(t)}authToken;setToken(t){return this.authToken=t,this}execute=t=>gr.startActiveSpan("drizzle.operation",()=>this._prepare().execute(t,this.authToken))};h5(Hd,[On]);function ol(n,t){return(r,e,...o)=>{let u=[e,...o].map(p=>({type:n,isAll:t,rightSelect:p}));for(let p of u)if(!Cf(r.getSelectedFields(),p.rightSelect.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return r.addSetOperators(u)}}var $ie=()=>({union:Hie,unionAll:Wie,intersect:Vie,intersectAll:Gie,except:Kie,exceptAll:Qie}),Hie=ol("union",!1),Wie=ol("union",!0),Vie=ol("intersect",!1),Gie=ol("intersect",!0),Kie=ol("except",!1),Qie=ol("except",!0);var cl=class{static[K]="PgQueryBuilder";dialect;dialectConfig;constructor(t){this.dialect=ye(t,_s)?t:void 0,this.dialectConfig=ye(t,_s)?void 0:t}$with=(t,r)=>{let e=this;return{as:u=>(typeof u=="function"&&(u=u(e)),new Proxy(new nl(u.getSQL(),r??("getSelectedFields"in u?u.getSelectedFields()??{}:{}),t,!0),new qr({alias:t,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};with(...t){let r=this;function e(p){return new Pn({fields:p??void 0,session:void 0,dialect:r.getDialect(),withList:t})}function o(p){return new Pn({fields:p??void 0,session:void 0,dialect:r.getDialect(),distinct:!0})}function u(p,m){return new Pn({fields:m??void 0,session:void 0,dialect:r.getDialect(),distinct:{on:p}})}return{select:e,selectDistinct:o,selectDistinctOn:u}}select(t){return new Pn({fields:t??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(t){return new Pn({fields:t??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}selectDistinctOn(t,r){return new Pn({fields:r??void 0,session:void 0,dialect:this.getDialect(),distinct:{on:t}})}getDialect(){return this.dialect||(this.dialect=new _s(this.dialectConfig)),this.dialect}};var qf=class{constructor(t,r,e,o,u){this.table=t,this.session=r,this.dialect=e,this.withList=o,this.overridingSystemValue_=u}static[K]="PgInsertBuilder";authToken;setToken(t){return this.authToken=t,this}overridingSystemValue(){return this.overridingSystemValue_=!0,this}values(t){if(t=Array.isArray(t)?t:[t],t.length===0)throw new Error("values() must be called with at least one value");let r=t.map(e=>{let o={},u=this.table[Ze.Symbol.Columns];for(let p of Object.keys(e)){let m=e[p];o[p]=ye(m,tt)?m:new ii(m,u[p])}return o});return new Wd(this.table,r,this.session,this.dialect,this.withList,!1,this.overridingSystemValue_).setToken(this.authToken)}select(t){let r=typeof t=="function"?t(new cl):t;if(!ye(r,tt)&&!Cf(this.table[Rd],r._.selectedFields))throw new Error("Insert select error: selected fields are not the same or are in a different order compared to the table definition");return new Wd(this.table,r,this.session,this.dialect,this.withList,!0)}},Wd=class extends On{constructor(t,r,e,o,u,p,m){super(),this.session=e,this.dialect=o,this.config={table:t,values:r,withList:u,select:p,overridingSystemValue_:m}}static[K]="PgInsert";config;returning(t=this.config.table[Ze.Symbol.Columns]){return this.config.returningFields=t,this.config.returning=qi(t),this}onConflictDoNothing(t={}){if(t.target===void 0)this.config.onConflict=X`do nothing`;else{let r="";r=Array.isArray(t.target)?t.target.map(o=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(o))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(t.target));let e=t.where?X` where ${t.where}`:void 0;this.config.onConflict=X`(${X.raw(r)})${e} do nothing`}return this}onConflictDoUpdate(t){if(t.where&&(t.targetWhere||t.setWhere))throw new Error('You cannot use both "where" and "targetWhere"/"setWhere" at the same time - "where" is deprecated, use "targetWhere" or "setWhere" instead.');let r=t.where?X` where ${t.where}`:void 0,e=t.targetWhere?X` where ${t.targetWhere}`:void 0,o=t.setWhere?X` where ${t.setWhere}`:void 0,u=this.dialect.buildUpdateSet(this.config.table,Ld(this.config.table,t.set)),p="";return p=Array.isArray(t.target)?t.target.map(m=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(m))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(t.target)),this.config.onConflict=X`(${X.raw(p)})${e} do update set ${u}${r}${o}`,this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){let{typings:t,...r}=this.dialect.sqlToQuery(this.getSQL());return r}_prepare(t){return gr.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,t,!0))}prepare(t){return this._prepare(t)}authToken;setToken(t){return this.authToken=t,this}execute=t=>gr.startActiveSpan("drizzle.operation",()=>this._prepare().execute(t,this.authToken));getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new qr({alias:ni(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}};var Vd=class extends On{constructor(t,r,e){super(),this.session=r,this.dialect=e,this.config={view:t}}static[K]="PgRefreshMaterializedView";config;concurrently(){if(this.config.withNoData!==void 0)throw new Error("Cannot use concurrently and withNoData together");return this.config.concurrently=!0,this}withNoData(){if(this.config.concurrently!==void 0)throw new Error("Cannot use concurrently and withNoData together");return this.config.withNoData=!0,this}getSQL(){return this.dialect.buildRefreshMaterializedViewQuery(this.config)}toSQL(){let{typings:t,...r}=this.dialect.sqlToQuery(this.getSQL());return r}_prepare(t){return gr.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),void 0,t,!0))}prepare(t){return this._prepare(t)}authToken;setToken(t){return this.authToken=t,this}execute=t=>gr.startActiveSpan("drizzle.operation",()=>this._prepare().execute(t,this.authToken))};var zf=class{constructor(t,r,e,o){this.table=t,this.session=r,this.dialect=e,this.withList=o}static[K]="PgUpdateBuilder";authToken;setToken(t){return this.authToken=t,this}set(t){return new Cy(this.table,Ld(this.table,t),this.session,this.dialect,this.withList).setToken(this.authToken)}},Cy=class extends On{constructor(t,r,e,o,u){super(),this.session=e,this.dialect=o,this.config={set:r,table:t,withList:u,joins:[]},this.tableName=Ma(t),this.joinsNotNullableMap=typeof this.tableName=="string"?{[this.tableName]:!0}:{}}static[K]="PgUpdate";config;tableName;joinsNotNullableMap;from(t){let r=t,e=Ma(r);return typeof e=="string"&&(this.joinsNotNullableMap[e]=!0),this.config.from=r,this}getTableLikeFields(t){return ye(t,gn)?t[Ze.Symbol.Columns]:ye(t,Zr)?t._.selectedFields:t[vr].selectedFields}createJoin(t){return(r,e)=>{let o=Ma(r);if(typeof o=="string"&&this.config.joins.some(u=>u.alias===o))throw new Error(`Alias "${o}" is already used in this query`);if(typeof e=="function"){let u=this.config.from&&!ye(this.config.from,tt)?this.getTableLikeFields(this.config.from):void 0;e=e(new Proxy(this.config.table[Ze.Symbol.Columns],new qr({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})),u&&new Proxy(u,new qr({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))}if(this.config.joins.push({on:e,table:r,joinType:t,alias:o}),typeof o=="string")switch(t){case"left":{this.joinsNotNullableMap[o]=!1;break}case"right":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([u])=>[u,!1])),this.joinsNotNullableMap[o]=!0;break}case"inner":{this.joinsNotNullableMap[o]=!0;break}case"full":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([u])=>[u,!1])),this.joinsNotNullableMap[o]=!1;break}}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");where(t){return this.config.where=t,this}returning(t){if(!t&&(t=Object.assign({},this.config.table[Ze.Symbol.Columns]),this.config.from)){let r=Ma(this.config.from);if(typeof r=="string"&&this.config.from&&!ye(this.config.from,tt)){let e=this.getTableLikeFields(this.config.from);t[r]=e}for(let e of this.config.joins){let o=Ma(e.table);if(typeof o=="string"&&!ye(e.table,tt)){let u=this.getTableLikeFields(e.table);t[o]=u}}}return this.config.returningFields=t,this.config.returning=qi(t),this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){let{typings:t,...r}=this.dialect.sqlToQuery(this.getSQL());return r}_prepare(t){let r=this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,t,!0);return r.joinsNotNullableMap=this.joinsNotNullableMap,r}prepare(t){return this._prepare(t)}authToken;setToken(t){return this.authToken=t,this}execute=t=>this._prepare().execute(t,this.authToken);getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new qr({alias:ni(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}};var Gd=class n extends tt{constructor(t){super(n.buildEmbeddedCount(t.source,t.filters).queryChunks),this.params=t,this.mapWith(Number),this.session=t.session,this.sql=n.buildCount(t.source,t.filters)}sql;token;static[K]="PgCountBuilder";[Symbol.toStringTag]="PgCountBuilder";session;static buildEmbeddedCount(t,r){return X`(select count(*) from ${t}${X.raw(" where ").if(r)}${r})`}static buildCount(t,r){return X`select count(*) as count from ${t}${X.raw(" where ").if(r)}${r};`}setToken(t){return this.token=t,this}then(t,r){return Promise.resolve(this.session.count(this.sql,this.token)).then(t,r)}catch(t){return this.then(void 0,t)}finally(t){return this.then(r=>(t?.(),r),r=>{throw t?.(),r})}};var Kd=class{constructor(t,r,e,o,u,p,m){this.fullSchema=t,this.schema=r,this.tableNamesMap=e,this.table=o,this.tableConfig=u,this.dialect=p,this.session=m}static[K]="PgRelationalQueryBuilder";findMany(t){return new Qd(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,t||{},"many")}findFirst(t){return new Qd(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,t?{...t,limit:1}:{limit:1},"first")}},Qd=class extends On{constructor(t,r,e,o,u,p,m,g,v){super(),this.fullSchema=t,this.schema=r,this.tableNamesMap=e,this.table=o,this.tableConfig=u,this.dialect=p,this.session=m,this.config=g,this.mode=v}static[K]="PgRelationalQuery";_prepare(t){return gr.startActiveSpan("drizzle.prepareQuery",()=>{let{query:r,builtQuery:e}=this._toSQL();return this.session.prepareQuery(e,void 0,t,!0,(o,u)=>{let p=o.map(m=>qd(this.schema,this.tableConfig,m,r.selection,u));return this.mode==="first"?p[0]:p})})}prepare(t){return this._prepare(t)}_getQuery(){return this.dialect.buildRelationalQueryWithoutPK({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName})}getSQL(){return this._getQuery().sql}_toSQL(){let t=this._getQuery(),r=this.dialect.sqlToQuery(t.sql);return{query:t,builtQuery:r}}toSQL(){return this._toSQL().builtQuery}authToken;setToken(t){return this.authToken=t,this}execute(){return gr.startActiveSpan("drizzle.operation",()=>this._prepare().execute(void 0,this.authToken))}};var Xd=class extends On{constructor(t,r,e,o){super(),this.execute=t,this.sql=r,this.query=e,this.mapBatchResult=o}static[K]="PgRaw";getSQL(){return this.sql}getQuery(){return this.query}mapResult(t,r){return r?this.mapBatchResult(t):t}_prepare(){return this}isResponseInArrayMode(){return!1}};var ll=class{constructor(t,r,e){if(this.dialect=t,this.session=r,this._=e?{schema:e.schema,fullSchema:e.fullSchema,tableNamesMap:e.tableNamesMap,session:r}:{schema:void 0,fullSchema:{},tableNamesMap:{},session:r},this.query={},this._.schema)for(let[o,u]of Object.entries(this._.schema))this.query[o]=new Kd(e.fullSchema,this._.schema,this._.tableNamesMap,e.fullSchema[o],u,t,r)}static[K]="PgDatabase";query;$with=(t,r)=>{let e=this;return{as:u=>(typeof u=="function"&&(u=u(new cl(e.dialect))),new Proxy(new nl(u.getSQL(),r??("getSelectedFields"in u?u.getSelectedFields()??{}:{}),t,!0),new qr({alias:t,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};$count(t,r){return new Gd({source:t,filters:r,session:this.session})}with(...t){let r=this;function e(v){return new Pn({fields:v??void 0,session:r.session,dialect:r.dialect,withList:t})}function o(v){return new Pn({fields:v??void 0,session:r.session,dialect:r.dialect,withList:t,distinct:!0})}function u(v,w){return new Pn({fields:w??void 0,session:r.session,dialect:r.dialect,withList:t,distinct:{on:v}})}function p(v){return new zf(v,r.session,r.dialect,t)}function m(v){return new qf(v,r.session,r.dialect,t)}function g(v){return new Uf(v,r.session,r.dialect,t)}return{select:e,selectDistinct:o,selectDistinctOn:u,update:p,insert:m,delete:g}}select(t){return new Pn({fields:t??void 0,session:this.session,dialect:this.dialect})}selectDistinct(t){return new Pn({fields:t??void 0,session:this.session,dialect:this.dialect,distinct:!0})}selectDistinctOn(t,r){return new Pn({fields:r??void 0,session:this.session,dialect:this.dialect,distinct:{on:t}})}update(t){return new zf(t,this.session,this.dialect)}insert(t){return new qf(t,this.session,this.dialect)}delete(t){return new Uf(t,this.session,this.dialect)}refreshMaterializedView(t){return new Vd(t,this.session,this.dialect)}authToken;execute(t){let r=typeof t=="string"?X.raw(t):t.getSQL(),e=this.dialect.sqlToQuery(r),o=this.session.prepareQuery(e,void 0,void 0,!1);return new Xd(()=>o.execute(void 0,this.authToken),r,e,u=>o.mapResult(u,!0))}transaction(t,r){return this.session.transaction(t,r)}};var Dy=class{constructor(t,r){this.unique=t,this.name=r}static[K]="PgIndexBuilderOn";on(...t){return new $f(t.map(r=>{if(ye(r,tt))return r;r=r;let e=new rl(r.name,!!r.keyAsName,r.columnType,r.indexConfig);return r.indexConfig=JSON.parse(JSON.stringify(r.defaultConfig)),e}),this.unique,!1,this.name)}onOnly(...t){return new $f(t.map(r=>{if(ye(r,tt))return r;r=r;let e=new rl(r.name,!!r.keyAsName,r.columnType,r.indexConfig);return r.indexConfig=r.defaultConfig,e}),this.unique,!0,this.name)}using(t,...r){return new $f(r.map(e=>{if(ye(e,tt))return e;e=e;let o=new rl(e.name,!!e.keyAsName,e.columnType,e.indexConfig);return e.indexConfig=JSON.parse(JSON.stringify(e.defaultConfig)),o}),this.unique,!0,this.name,t)}},$f=class{static[K]="PgIndexBuilder";config;constructor(t,r,e,o,u="btree"){this.config={name:o,columns:t,unique:r,only:e,method:u}}concurrently(){return this.config.concurrently=!0,this}with(t){return this.config.with=t,this}where(t){return this.config.where=t,this}build(t){return new Iy(this.config,t)}},Iy=class{static[K]="PgIndex";config;constructor(t,r){this.config={...t,table:r}}};function Q5(n){return new Dy(!1,n)}var Jd=class{constructor(t){this.query=t}authToken;getQuery(){return this.query}mapResult(t,r){return t}setToken(t){return this.authToken=t,this}static[K]="PgPreparedQuery";joinsNotNullableMap},Yd=class{constructor(t){this.dialect=t}static[K]="PgSession";execute(t,r){return gr.startActiveSpan("drizzle.operation",()=>gr.startActiveSpan("drizzle.prepareQuery",()=>this.prepareQuery(this.dialect.sqlToQuery(t),void 0,void 0,!1)).setToken(r).execute(void 0,r))}all(t){return this.prepareQuery(this.dialect.sqlToQuery(t),void 0,void 0,!1).all()}async count(t,r){let e=await this.execute(t,r);return Number(e[0].count)}},Zd=class extends ll{constructor(t,r,e,o=0){super(t,r,e),this.schema=e,this.nestedIndex=o}static[K]="PgTransaction";rollback(){throw new Od}getTransactionConfigSQL(t){let r=[];return t.isolationLevel&&r.push(`isolation level ${t.isolationLevel}`),t.accessMode&&r.push(t.accessMode),typeof t.deferrable=="boolean"&&r.push(t.deferrable?"deferrable":"not deferrable"),X.raw(r.join(" "))}setTransaction(t){return this.session.execute(X`set transaction ${this.getTransactionConfigSQL(t)}`)}};var Wt;(function(n){n.assertEqual=o=>o;function t(o){}n.assertIs=t;function r(o){throw new Error}n.assertNever=r,n.arrayToEnum=o=>{let u={};for(let p of o)u[p]=p;return u},n.getValidEnumValues=o=>{let u=n.objectKeys(o).filter(m=>typeof o[o[m]]!="number"),p={};for(let m of u)p[m]=o[m];return n.objectValues(p)},n.objectValues=o=>n.objectKeys(o).map(function(u){return o[u]}),n.objectKeys=typeof Object.keys=="function"?o=>Object.keys(o):o=>{let u=[];for(let p in o)Object.prototype.hasOwnProperty.call(o,p)&&u.push(p);return u},n.find=(o,u)=>{for(let p of o)if(u(p))return p},n.isInteger=typeof Number.isInteger=="function"?o=>Number.isInteger(o):o=>typeof o=="number"&&isFinite(o)&&Math.floor(o)===o;function e(o,u=" | "){return o.map(p=>typeof p=="string"?`'${p}'`:p).join(u)}n.joinValues=e,n.jsonStringifyReplacer=(o,u)=>typeof u=="bigint"?u.toString():u})(Wt||(Wt={}));var Oy;(function(n){n.mergeShapes=(t,r)=>({...t,...r})})(Oy||(Oy={}));var rt=Wt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),za=n=>{switch(typeof n){case"undefined":return rt.undefined;case"string":return rt.string;case"number":return isNaN(n)?rt.nan:rt.number;case"boolean":return rt.boolean;case"function":return rt.function;case"bigint":return rt.bigint;case"symbol":return rt.symbol;case"object":return Array.isArray(n)?rt.array:n===null?rt.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?rt.promise:typeof Map<"u"&&n instanceof Map?rt.map:typeof Set<"u"&&n instanceof Set?rt.set:typeof Date<"u"&&n instanceof Date?rt.date:rt.object;default:return rt.unknown}},Pe=Wt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Xie=n=>JSON.stringify(n,null,2).replace(/"([^"]+)":/g,"$1:"),wi=class n extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){let r=t||function(u){return u.message},e={_errors:[]},o=u=>{for(let p of u.issues)if(p.code==="invalid_union")p.unionErrors.map(o);else if(p.code==="invalid_return_type")o(p.returnTypeError);else if(p.code==="invalid_arguments")o(p.argumentsError);else if(p.path.length===0)e._errors.push(r(p));else{let m=e,g=0;for(;g<p.path.length;){let v=p.path[g];g===p.path.length-1?(m[v]=m[v]||{_errors:[]},m[v]._errors.push(r(p))):m[v]=m[v]||{_errors:[]},m=m[v],g++}}};return o(this),e}static assert(t){if(!(t instanceof n))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Wt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){let r={},e=[];for(let o of this.issues)o.path.length>0?(r[o.path[0]]=r[o.path[0]]||[],r[o.path[0]].push(t(o))):e.push(t(o));return{formErrors:e,fieldErrors:r}}get formErrors(){return this.flatten()}};wi.create=n=>new wi(n);var pl=(n,t)=>{let r;switch(n.code){case Pe.invalid_type:n.received===rt.undefined?r="Required":r=`Expected ${n.expected}, received ${n.received}`;break;case Pe.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(n.expected,Wt.jsonStringifyReplacer)}`;break;case Pe.unrecognized_keys:r=`Unrecognized key(s) in object: ${Wt.joinValues(n.keys,", ")}`;break;case Pe.invalid_union:r="Invalid input";break;case Pe.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Wt.joinValues(n.options)}`;break;case Pe.invalid_enum_value:r=`Invalid enum value. Expected ${Wt.joinValues(n.options)}, received '${n.received}'`;break;case Pe.invalid_arguments:r="Invalid function arguments";break;case Pe.invalid_return_type:r="Invalid function return type";break;case Pe.invalid_date:r="Invalid date";break;case Pe.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(r=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?r=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?r=`Invalid input: must end with "${n.validation.endsWith}"`:Wt.assertNever(n.validation):n.validation!=="regex"?r=`Invalid ${n.validation}`:r="Invalid";break;case Pe.too_small:n.type==="array"?r=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?r=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?r=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?r=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:r="Invalid input";break;case Pe.too_big:n.type==="array"?r=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?r=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?r=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?r=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?r=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:r="Invalid input";break;case Pe.custom:r="Invalid input";break;case Pe.invalid_intersection_types:r="Intersection results could not be merged";break;case Pe.not_multiple_of:r=`Number must be a multiple of ${n.multipleOf}`;break;case Pe.not_finite:r="Number must be finite";break;default:r=t.defaultError,Wt.assertNever(n)}return{message:r}},Z5=pl;function Jie(n){Z5=n}function eh(){return Z5}var th=n=>{let{data:t,path:r,errorMaps:e,issueData:o}=n,u=[...r,...o.path||[]],p={...o,path:u};if(o.message!==void 0)return{...o,path:u,message:o.message};let m="",g=e.filter(v=>!!v).slice().reverse();for(let v of g)m=v(p,{data:t,defaultError:m}).message;return{...o,path:u,message:m}},Yie=[];function Xe(n,t){let r=eh(),e=th({issueData:t,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,r,r===pl?void 0:pl].filter(o=>!!o)});n.common.issues.push(e)}var Nn=class n{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){let e=[];for(let o of r){if(o.status==="aborted")return bt;o.status==="dirty"&&t.dirty(),e.push(o.value)}return{status:t.value,value:e}}static async mergeObjectAsync(t,r){let e=[];for(let o of r){let u=await o.key,p=await o.value;e.push({key:u,value:p})}return n.mergeObjectSync(t,e)}static mergeObjectSync(t,r){let e={};for(let o of r){let{key:u,value:p}=o;if(u.status==="aborted"||p.status==="aborted")return bt;u.status==="dirty"&&t.dirty(),p.status==="dirty"&&t.dirty(),u.value!=="__proto__"&&(typeof p.value<"u"||o.alwaysSet)&&(e[u.value]=p.value)}return{status:t.value,value:e}}},bt=Object.freeze({status:"aborted"}),fl=n=>({status:"dirty",value:n}),Gn=n=>({status:"valid",value:n}),Py=n=>n.status==="aborted",Ny=n=>n.status==="dirty",Ao=n=>n.status==="valid",Vf=n=>typeof Promise<"u"&&n instanceof Promise;function rh(n,t,r,e){if(r==="a"&&!e)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?n!==t||!e:!t.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?e:r==="a"?e.call(n):e?e.value:t.get(n)}function e9(n,t,r,e,o){if(e==="m")throw new TypeError("Private method is not writable");if(e==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?n!==t||!o:!t.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e==="a"?o.call(n,r):o?o.value=r:t.set(n,r),r}var lt;(function(n){n.errToObj=t=>typeof t=="string"?{message:t}:t||{},n.toString=t=>typeof t=="string"?t:t?.message})(lt||(lt={}));var Hf,Wf,Hi=class{constructor(t,r,e,o){this._cachedPath=[],this.parent=t,this.data=r,this._path=e,this._key=o}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},X5=(n,t)=>{if(Ao(t))return{success:!0,data:t.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new wi(n.common.issues);return this._error=r,this._error}}};function Tt(n){if(!n)return{};let{errorMap:t,invalid_type_error:r,required_error:e,description:o}=n;if(t&&(r||e))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:o}:{errorMap:(p,m)=>{var g,v;let{message:w}=n;return p.code==="invalid_enum_value"?{message:w??m.defaultError}:typeof m.data>"u"?{message:(g=w??e)!==null&&g!==void 0?g:m.defaultError}:p.code!=="invalid_type"?{message:m.defaultError}:{message:(v=w??r)!==null&&v!==void 0?v:m.defaultError}},description:o}}var Ct=class{get description(){return this._def.description}_getType(t){return za(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:za(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Nn,ctx:{common:t.parent.common,data:t.data,parsedType:za(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){let r=this._parse(t);if(Vf(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){let r=this._parse(t);return Promise.resolve(r)}parse(t,r){let e=this.safeParse(t,r);if(e.success)return e.data;throw e.error}safeParse(t,r){var e;let o={common:{issues:[],async:(e=r?.async)!==null&&e!==void 0?e:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:za(t)},u=this._parseSync({data:t,path:o.path,parent:o});return X5(o,u)}"~validate"(t){var r,e;let o={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:za(t)};if(!this["~standard"].async)try{let u=this._parseSync({data:t,path:[],parent:o});return Ao(u)?{value:u.value}:{issues:o.common.issues}}catch(u){!((e=(r=u?.message)===null||r===void 0?void 0:r.toLowerCase())===null||e===void 0)&&e.includes("encountered")&&(this["~standard"].async=!0),o.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:o}).then(u=>Ao(u)?{value:u.value}:{issues:o.common.issues})}async parseAsync(t,r){let e=await this.safeParseAsync(t,r);if(e.success)return e.data;throw e.error}async safeParseAsync(t,r){let e={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:za(t)},o=this._parse({data:t,path:e.path,parent:e}),u=await(Vf(o)?o:Promise.resolve(o));return X5(e,u)}refine(t,r){let e=o=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(o):r;return this._refinement((o,u)=>{let p=t(o),m=()=>u.addIssue({code:Pe.custom,...e(o)});return typeof Promise<"u"&&p instanceof Promise?p.then(g=>g?!0:(m(),!1)):p?!0:(m(),!1)})}refinement(t,r){return this._refinement((e,o)=>t(e)?!0:(o.addIssue(typeof r=="function"?r(e,o):r),!1))}_refinement(t){return new _i({schema:this,typeName:vt.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return $i.create(this,this._def)}nullable(){return Ea.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ha.create(this)}promise(){return ks.create(this,this._def)}or(t){return Po.create([this,t],this._def)}and(t){return No.create(this,t,this._def)}transform(t){return new _i({...Tt(this._def),schema:this,typeName:vt.ZodEffects,effect:{type:"transform",transform:t}})}default(t){let r=typeof t=="function"?t:()=>t;return new Uo({...Tt(this._def),innerType:this,defaultValue:r,typeName:vt.ZodDefault})}brand(){return new Gf({typeName:vt.ZodBranded,type:this,...Tt(this._def)})}catch(t){let r=typeof t=="function"?t:()=>t;return new qo({...Tt(this._def),innerType:this,catchValue:r,typeName:vt.ZodCatch})}describe(t){let r=this.constructor;return new r({...this._def,description:t})}pipe(t){return Kf.create(this,t)}readonly(){return zo.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},Zie=/^c[^\s-]{8,}$/i,eae=/^[0-9a-z]+$/,tae=/^[0-9A-HJKMNP-TV-Z]{26}$/i,rae=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,nae=/^[a-z0-9_-]{21}$/i,iae=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,aae=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,sae=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,oae="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",Ry,cae=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,lae=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,uae=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,fae=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,pae=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,dae=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,t9="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",hae=new RegExp(`^${t9}$`);function r9(n){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return n.precision?t=`${t}\\.\\d{${n.precision}}`:n.precision==null&&(t=`${t}(\\.\\d+)?`),t}function mae(n){return new RegExp(`^${r9(n)}$`)}function n9(n){let t=`${t9}T${r9(n)}`,r=[];return r.push(n.local?"Z?":"Z"),n.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function gae(n,t){return!!((t==="v4"||!t)&&cae.test(n)||(t==="v6"||!t)&&uae.test(n))}function vae(n,t){if(!iae.test(n))return!1;try{let[r]=n.split("."),e=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),o=JSON.parse(atob(e));return!(typeof o!="object"||o===null||!o.typ||!o.alg||t&&o.alg!==t)}catch{return!1}}function xae(n,t){return!!((t==="v4"||!t)&&lae.test(n)||(t==="v6"||!t)&&fae.test(n))}var Ss=class n extends Ct{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==rt.string){let u=this._getOrReturnCtx(t);return Xe(u,{code:Pe.invalid_type,expected:rt.string,received:u.parsedType}),bt}let e=new Nn,o;for(let u of this._def.checks)if(u.kind==="min")t.data.length<u.value&&(o=this._getOrReturnCtx(t,o),Xe(o,{code:Pe.too_small,minimum:u.value,type:"string",inclusive:!0,exact:!1,message:u.message}),e.dirty());else if(u.kind==="max")t.data.length>u.value&&(o=this._getOrReturnCtx(t,o),Xe(o,{code:Pe.too_big,maximum:u.value,type:"string",inclusive:!0,exact:!1,message:u.message}),e.dirty());else if(u.kind==="length"){let p=t.data.length>u.value,m=t.data.length<u.value;(p||m)&&(o=this._getOrReturnCtx(t,o),p?Xe(o,{code:Pe.too_big,maximum:u.value,type:"string",inclusive:!0,exact:!0,message:u.message}):m&&Xe(o,{code:Pe.too_small,minimum:u.value,type:"string",inclusive:!0,exact:!0,message:u.message}),e.dirty())}else if(u.kind==="email")sae.test(t.data)||(o=this._getOrReturnCtx(t,o),Xe(o,{validation:"email",code:Pe.invalid_string,message:u.message}),e.dirty());else if(u.kind==="emoji")Ry||(Ry=new RegExp(oae,"u")),Ry.test(t.data)||(o=this._getOrReturnCtx(t,o),Xe(o,{validation:"emoji",code:Pe.invalid_string,message:u.message}),e.dirty());else if(u.kind==="uuid")rae.test(t.data)||(o=this._getOrReturnCtx(t,o),Xe(o,{validation:"uuid",code:Pe.invalid_string,message:u.message}),e.dirty());else if(u.kind==="nanoid")nae.test(t.data)||(o=this._getOrReturnCtx(t,o),Xe(o,{validation:"nanoid",code:Pe.invalid_string,message:u.message}),e.dirty());else if(u.kind==="cuid")Zie.test(t.data)||(o=this._getOrReturnCtx(t,o),Xe(o,{validation:"cuid",code:Pe.invalid_string,message:u.message}),e.dirty());else if(u.kind==="cuid2")eae.test(t.data)||(o=this._getOrReturnCtx(t,o),Xe(o,{validation:"cuid2",code:Pe.invalid_string,message:u.message}),e.dirty());else if(u.kind==="ulid")tae.test(t.data)||(o=this._getOrReturnCtx(t,o),Xe(o,{validation:"ulid",code:Pe.invalid_string,message:u.message}),e.dirty());else if(u.kind==="url")try{new URL(t.data)}catch{o=this._getOrReturnCtx(t,o),Xe(o,{validation:"url",code:Pe.invalid_string,message:u.message}),e.dirty()}else u.kind==="regex"?(u.regex.lastIndex=0,u.regex.test(t.data)||(o=this._getOrReturnCtx(t,o),Xe(o,{validation:"regex",code:Pe.invalid_string,message:u.message}),e.dirty())):u.kind==="trim"?t.data=t.data.trim():u.kind==="includes"?t.data.includes(u.value,u.position)||(o=this._getOrReturnCtx(t,o),Xe(o,{code:Pe.invalid_string,validation:{includes:u.value,position:u.position},message:u.message}),e.dirty()):u.kind==="toLowerCase"?t.data=t.data.toLowerCase():u.kind==="toUpperCase"?t.data=t.data.toUpperCase():u.kind==="startsWith"?t.data.startsWith(u.value)||(o=this._getOrReturnCtx(t,o),Xe(o,{code:Pe.invalid_string,validation:{startsWith:u.value},message:u.message}),e.dirty()):u.kind==="endsWith"?t.data.endsWith(u.value)||(o=this._getOrReturnCtx(t,o),Xe(o,{code:Pe.invalid_string,validation:{endsWith:u.value},message:u.message}),e.dirty()):u.kind==="datetime"?n9(u).test(t.data)||(o=this._getOrReturnCtx(t,o),Xe(o,{code:Pe.invalid_string,validation:"datetime",message:u.message}),e.dirty()):u.kind==="date"?hae.test(t.data)||(o=this._getOrReturnCtx(t,o),Xe(o,{code:Pe.invalid_string,validation:"date",message:u.message}),e.dirty()):u.kind==="time"?mae(u).test(t.data)||(o=this._getOrReturnCtx(t,o),Xe(o,{code:Pe.invalid_string,validation:"time",message:u.message}),e.dirty()):u.kind==="duration"?aae.test(t.data)||(o=this._getOrReturnCtx(t,o),Xe(o,{validation:"duration",code:Pe.invalid_string,message:u.message}),e.dirty()):u.kind==="ip"?gae(t.data,u.version)||(o=this._getOrReturnCtx(t,o),Xe(o,{validation:"ip",code:Pe.invalid_string,message:u.message}),e.dirty()):u.kind==="jwt"?vae(t.data,u.alg)||(o=this._getOrReturnCtx(t,o),Xe(o,{validation:"jwt",code:Pe.invalid_string,message:u.message}),e.dirty()):u.kind==="cidr"?xae(t.data,u.version)||(o=this._getOrReturnCtx(t,o),Xe(o,{validation:"cidr",code:Pe.invalid_string,message:u.message}),e.dirty()):u.kind==="base64"?pae.test(t.data)||(o=this._getOrReturnCtx(t,o),Xe(o,{validation:"base64",code:Pe.invalid_string,message:u.message}),e.dirty()):u.kind==="base64url"?dae.test(t.data)||(o=this._getOrReturnCtx(t,o),Xe(o,{validation:"base64url",code:Pe.invalid_string,message:u.message}),e.dirty()):Wt.assertNever(u);return{status:e.value,value:t.data}}_regex(t,r,e){return this.refinement(o=>t.test(o),{validation:r,code:Pe.invalid_string,...lt.errToObj(e)})}_addCheck(t){return new n({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...lt.errToObj(t)})}url(t){return this._addCheck({kind:"url",...lt.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...lt.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...lt.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...lt.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...lt.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...lt.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...lt.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...lt.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...lt.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...lt.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...lt.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...lt.errToObj(t)})}datetime(t){var r,e;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof t?.precision>"u"?null:t?.precision,offset:(r=t?.offset)!==null&&r!==void 0?r:!1,local:(e=t?.local)!==null&&e!==void 0?e:!1,...lt.errToObj(t?.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof t?.precision>"u"?null:t?.precision,...lt.errToObj(t?.message)})}duration(t){return this._addCheck({kind:"duration",...lt.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...lt.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r?.position,...lt.errToObj(r?.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...lt.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...lt.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...lt.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...lt.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...lt.errToObj(r)})}nonempty(t){return this.min(1,lt.errToObj(t))}trim(){return new n({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new n({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new n({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}};Ss.create=n=>{var t;return new Ss({checks:[],typeName:vt.ZodString,coerce:(t=n?.coerce)!==null&&t!==void 0?t:!1,...Tt(n)})};function yae(n,t){let r=(n.toString().split(".")[1]||"").length,e=(t.toString().split(".")[1]||"").length,o=r>e?r:e,u=parseInt(n.toFixed(o).replace(".","")),p=parseInt(t.toFixed(o).replace(".",""));return u%p/Math.pow(10,o)}var To=class n extends Ct{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==rt.number){let u=this._getOrReturnCtx(t);return Xe(u,{code:Pe.invalid_type,expected:rt.number,received:u.parsedType}),bt}let e,o=new Nn;for(let u of this._def.checks)u.kind==="int"?Wt.isInteger(t.data)||(e=this._getOrReturnCtx(t,e),Xe(e,{code:Pe.invalid_type,expected:"integer",received:"float",message:u.message}),o.dirty()):u.kind==="min"?(u.inclusive?t.data<u.value:t.data<=u.value)&&(e=this._getOrReturnCtx(t,e),Xe(e,{code:Pe.too_small,minimum:u.value,type:"number",inclusive:u.inclusive,exact:!1,message:u.message}),o.dirty()):u.kind==="max"?(u.inclusive?t.data>u.value:t.data>=u.value)&&(e=this._getOrReturnCtx(t,e),Xe(e,{code:Pe.too_big,maximum:u.value,type:"number",inclusive:u.inclusive,exact:!1,message:u.message}),o.dirty()):u.kind==="multipleOf"?yae(t.data,u.value)!==0&&(e=this._getOrReturnCtx(t,e),Xe(e,{code:Pe.not_multiple_of,multipleOf:u.value,message:u.message}),o.dirty()):u.kind==="finite"?Number.isFinite(t.data)||(e=this._getOrReturnCtx(t,e),Xe(e,{code:Pe.not_finite,message:u.message}),o.dirty()):Wt.assertNever(u);return{status:o.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,lt.toString(r))}gt(t,r){return this.setLimit("min",t,!1,lt.toString(r))}lte(t,r){return this.setLimit("max",t,!0,lt.toString(r))}lt(t,r){return this.setLimit("max",t,!1,lt.toString(r))}setLimit(t,r,e,o){return new n({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:e,message:lt.toString(o)}]})}_addCheck(t){return new n({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:lt.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:lt.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:lt.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:lt.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:lt.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:lt.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:lt.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:lt.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:lt.toString(t)})}get minValue(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Wt.isInteger(t.value))}get isFinite(){let t=null,r=null;for(let e of this._def.checks){if(e.kind==="finite"||e.kind==="int"||e.kind==="multipleOf")return!0;e.kind==="min"?(r===null||e.value>r)&&(r=e.value):e.kind==="max"&&(t===null||e.value<t)&&(t=e.value)}return Number.isFinite(r)&&Number.isFinite(t)}};To.create=n=>new To({checks:[],typeName:vt.ZodNumber,coerce:n?.coerce||!1,...Tt(n)});var Co=class n extends Ct{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==rt.bigint)return this._getInvalidInput(t);let e,o=new Nn;for(let u of this._def.checks)u.kind==="min"?(u.inclusive?t.data<u.value:t.data<=u.value)&&(e=this._getOrReturnCtx(t,e),Xe(e,{code:Pe.too_small,type:"bigint",minimum:u.value,inclusive:u.inclusive,message:u.message}),o.dirty()):u.kind==="max"?(u.inclusive?t.data>u.value:t.data>=u.value)&&(e=this._getOrReturnCtx(t,e),Xe(e,{code:Pe.too_big,type:"bigint",maximum:u.value,inclusive:u.inclusive,message:u.message}),o.dirty()):u.kind==="multipleOf"?t.data%u.value!==BigInt(0)&&(e=this._getOrReturnCtx(t,e),Xe(e,{code:Pe.not_multiple_of,multipleOf:u.value,message:u.message}),o.dirty()):Wt.assertNever(u);return{status:o.value,value:t.data}}_getInvalidInput(t){let r=this._getOrReturnCtx(t);return Xe(r,{code:Pe.invalid_type,expected:rt.bigint,received:r.parsedType}),bt}gte(t,r){return this.setLimit("min",t,!0,lt.toString(r))}gt(t,r){return this.setLimit("min",t,!1,lt.toString(r))}lte(t,r){return this.setLimit("max",t,!0,lt.toString(r))}lt(t,r){return this.setLimit("max",t,!1,lt.toString(r))}setLimit(t,r,e,o){return new n({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:e,message:lt.toString(o)}]})}_addCheck(t){return new n({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:lt.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:lt.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:lt.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:lt.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:lt.toString(r)})}get minValue(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}};Co.create=n=>{var t;return new Co({checks:[],typeName:vt.ZodBigInt,coerce:(t=n?.coerce)!==null&&t!==void 0?t:!1,...Tt(n)})};var Do=class extends Ct{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==rt.boolean){let e=this._getOrReturnCtx(t);return Xe(e,{code:Pe.invalid_type,expected:rt.boolean,received:e.parsedType}),bt}return Gn(t.data)}};Do.create=n=>new Do({typeName:vt.ZodBoolean,coerce:n?.coerce||!1,...Tt(n)});var Io=class n extends Ct{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==rt.date){let u=this._getOrReturnCtx(t);return Xe(u,{code:Pe.invalid_type,expected:rt.date,received:u.parsedType}),bt}if(isNaN(t.data.getTime())){let u=this._getOrReturnCtx(t);return Xe(u,{code:Pe.invalid_date}),bt}let e=new Nn,o;for(let u of this._def.checks)u.kind==="min"?t.data.getTime()<u.value&&(o=this._getOrReturnCtx(t,o),Xe(o,{code:Pe.too_small,message:u.message,inclusive:!0,exact:!1,minimum:u.value,type:"date"}),e.dirty()):u.kind==="max"?t.data.getTime()>u.value&&(o=this._getOrReturnCtx(t,o),Xe(o,{code:Pe.too_big,message:u.message,inclusive:!0,exact:!1,maximum:u.value,type:"date"}),e.dirty()):Wt.assertNever(u);return{status:e.value,value:new Date(t.data.getTime())}}_addCheck(t){return new n({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:lt.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:lt.toString(r)})}get minDate(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}};Io.create=n=>new Io({checks:[],coerce:n?.coerce||!1,typeName:vt.ZodDate,...Tt(n)});var dl=class extends Ct{_parse(t){if(this._getType(t)!==rt.symbol){let e=this._getOrReturnCtx(t);return Xe(e,{code:Pe.invalid_type,expected:rt.symbol,received:e.parsedType}),bt}return Gn(t.data)}};dl.create=n=>new dl({typeName:vt.ZodSymbol,...Tt(n)});var Ro=class extends Ct{_parse(t){if(this._getType(t)!==rt.undefined){let e=this._getOrReturnCtx(t);return Xe(e,{code:Pe.invalid_type,expected:rt.undefined,received:npm warn config production Use `--omit=dev` instead.
> NODE_ENV=production node dist/index.cjs
> rest-express@1.0.0 start
/app/dist/index.cjs:214